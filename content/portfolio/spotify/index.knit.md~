---
title: Spotify
author: 'Rebecca Frost-Brewer'
date: ''
slug: []
categories: []
tags: []
---



```r
library(tidyverse)
library(lubridate)
library(ggrepel)
library(scales)
library(hrbrthemes)
library(ggbeeswarm)
```



```r
# Complete data set of all the "Top 200" and "Viral 50" charts published globally
# by Spotify
charts_usa <- read_csv("data/charts_usa.csv")
```



```r
# All songs of 2020 that at any point were ranked in the Top 10
charts_usa_2020 <- charts_usa %>%
  drop_na(streams, rank) %>%
  mutate(ranking_date = ymd(date)) %>%
  mutate(year = year(ranking_date),
         month = month(ranking_date)) %>%
  filter(year == 2020) %>%
  filter(rank <= 10) %>%
  mutate(rank = as.factor(rank))

# Most frequent artist that appears in the Top 10 of songs of 2020
charts_usa_2020 %>%
  select(artist) %>%
  group_by(artist) %>%
  count() %>%
  arrange(desc(n)) %>%
  head(10)
```

```
## # A tibble: 10 x 2
## # Groups:   artist [10]
##    artist            n
##    <chr>         <int>
##  1 Juice WRLD      246
##  2 The Weeknd      229
##  3 Roddy Ricch     209
##  4 DaBaby          207
##  5 Drake           180
##  6 Pop Smoke       173
##  7 Lil Mosey       152
##  8 Ariana Grande   148
##  9 Taylor Swift    133
## 10 Cardi B         111
```

```r
# Top 10 artists based on their songs with the most number of streams
charts_usa_2020 %>%
  select(artist, streams) %>%
  group_by(artist) %>%
  summarise(streams = sum(streams)) %>%
  arrange(desc(streams))
```

```
## # A tibble: 101 x 2
##    artist          streams
##    <chr>             <dbl>
##  1 Roddy Ricch   341381067
##  2 Juice WRLD    287124051
##  3 The Weeknd    262617125
##  4 DaBaby        256919122
##  5 Drake         228032320
##  6 Taylor Swift  208798570
##  7 Cardi B       177278749
##  8 Ariana Grande 168068062
##  9 Lil Mosey     166738428
## 10 Pop Smoke     162273054
## # … with 91 more rows
```

```r
# Top 10 artists based on how the number of times they had a song ranked #1 in streams
charts_usa_2020 %>%
  filter(rank == 1) %>%
  group_by(artist) %>%
  count() %>%
  arrange(desc(n))
```

```
## # A tibble: 23 x 2
## # Groups:   artist [23]
##    artist                                 n
##    <chr>                              <int>
##  1 Roddy Ricch                           78
##  2 DaBaby                                65
##  3 Cardi B                               64
##  4 Ariana Grande                         32
##  5 Drake                                 21
##  6 Taylor Swift                          13
##  7 THE SCOTTS, Travis Scott, Kid Cudi    13
##  8 Internet Money                        11
##  9 Juice WRLD                            11
## 10 The Weeknd                            11
## # … with 13 more rows
```




```r
genre_label <- rep(c("hip hop","r&b/soul","pop","rap","trap","rap",
                               "rap","pop","rap","hip hop","hip hop","pop",
                               "pop","pop"))

top_artists <- charts_usa_2020 %>%
  drop_na(streams) %>%
  select(artist, streams) %>%
  filter(artist %in% c("Juice WRLD","The Weeknd","Taylor Swift","Ariana Grande",
                       "Lil Mosey","Pop Smoke","Lil Uzi Vert","Justin Bieber",
                       "Tory Lanez, Jack Harlow","Arizona Zervas","Roddy Ricch",
                       "Cardi B","DaBaby","DripReport","Miki Matsubara","Cookiee Kawaii",
                       "Mario Judah","Drake","Surf Mesa","24Goldn")) %>%
  group_by(artist) %>%
  summarise(ave_streams = mean(streams, na.rm = TRUE)) %>%
  arrange(ave_streams) %>%
  mutate(artist = fct_inorder(artist))
  
top_artists$genre <- c("rap","rap","pop","trap","pop","r&b/soul","rap","rap",
                       "rap","hip hop","rap","pop","pop","rap")

top_artists_2020 <- top_artists %>%
  mutate(rap_label = ifelse(genre == "rap", TRUE, FALSE))
```
















